(this.webpackJsonproute=this.webpackJsonproute||[]).push([[1],{103:function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.r(e),n.d(e,"MoviesPage",(function(){return x}));var o,c=n(38),i=n(39),s=n(41),u=n(40),p=n(0),l=n(52),h=n(1),f=n(11),d=n(12).a.div(o||(o=Object(f.a)(["\n    width:400px;\n    margin:0 auto;\n    padding:20px 0;\n    display:flex;\n    justify-content: center;\n    .searchInput,\n    .searchButton{\n        padding:10px;\n        border-radius:20px;\n    }\n    .searchInput{\n        margin:0 10px 0 0;\n    }\n"]))),v=n(2),m=function(t){Object(s.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))).state={query:""},t.handleChange=function(e){t.setState({query:e.currentTarget.value})},t.handleSubmit=function(e){e.preventDefault(),t.props.onSubmit(t.state.query),t.setState({query:""})},t}return Object(i.a)(n,[{key:"render",value:function(){var t=this,e=this.state.query;return Object(v.jsx)(d,{children:Object(v.jsxs)("form",{action:"",onSubmit:this.handleSubmit,children:[Object(v.jsx)("input",{className:"searchInput",type:"text",placeholder:"Input movies",value:e,onChange:this.handleChange}),Object(v.jsx)("button",{className:"searchButton",type:"submit",onClick:function(){return t.props.history.push({pathname:t.props.location.pathname,search:"query=".concat(e),query:"".concat(e)})},children:"Search"})]})})}}]),n}(p.Component),b=Object(h.g)(m),y=n(47),j=n(42),g=n(53),w=!0,x=function(t){Object(s.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(c.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={films:[],page:1,query:"",error:null,isLoading:!1,showLoadMoreButton:!1},t.onChengeQuery=function(e){t.setState({query:e,page:1,films:[],error:null})},t.fetchMovies=function(){t.setState({isLoading:!0});var e=t.state,n={query:e.query,page:e.page};w=!0,j.a.fetchMoviesSearch(n).then((function(e){w&&t.setState((function(n){return{films:[].concat(a(n.films),a(e.results)),page:n.page+1,query:t.props.location.query}}))})).finally((function(){w&&0===t.state.films.length&&t.setState({error:!0}),w&&!t.state.error&&t.setState({showLoadMoreButton:!0}),w&&t.setState({isLoading:!1}),t.state.films.length<20&&t.setState({showLoadMoreButton:!1}),t.windowScrollTo()}))},t.windowScrollTo=function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},t}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var t=this,e={query:this.props.location.query,page:this.state.page};w=!0,this.props.location.query&&j.a.fetchMoviesSearch(e).then((function(e){w&&t.setState((function(n){return{films:[].concat(a(n.films),a(e.results)),page:n.page+1,query:t.props.location.query}}))})).finally((function(){w&&0===t.state.films.length&&t.setState({error:!0}),w&&!t.state.error&&t.setState({showLoadMoreButton:!0}),w&&t.setState({isLoading:!1}),t.windowScrollTo()}))}},{key:"componentDidUpdate",value:function(t,e){e.query!==this.state.query&&this.fetchMovies()}},{key:"componentWillUnmount",value:function(){w=!1}},{key:"render",value:function(){var t=this.state,e=t.films,n=t.error,r=t.isLoading,a=t.showLoadMoreButton;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(b,{onSubmit:this.onChengeQuery}),!r&&Object(v.jsx)(l.a,{films:e}),n&&Object(v.jsx)("h2",{className:"errorTitle",children:"Something went wrong"}),r&&Object(v.jsx)(y.a,{}),Object(v.jsx)("div",{className:"Load_button",children:a&&Object(v.jsx)(g.a,{handleGoBack:this.fetchMovies,text:"Load more"})})]})}}]),n}(p.Component);e.default=x},42:function(t,e,n){"use strict";var r=n(44),a=n.n(r),o=n(45),c=n(50),i=n.n(c),s=n(8),u=n.n(s);i.a.defaults.baseURL="https://api.themoviedb.org/3",i.a.defaults.params={api_key:"93638e3fbf6f3d3914a333647822b76d"};var p=function(){var t=Object(o.a)(a.a.mark((function t(){var e,n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.get("/trending/movie/day");case 3:return e=t.sent,n=e.data,t.abrupt("return",n);case 8:throw t.prev=8,t.t0=t.catch(0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),l=function(){var t=Object(o.a)(a.a.mark((function t(e){var n,r,o,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.query,r=e.page,t.prev=1,t.next=4,i.a.get("/search/movie",{params:{query:n,page:r}});case 4:return o=t.sent,c=o.data,t.abrupt("return",c);case 9:throw t.prev=9,t.t0=t.catch(1),t.t0;case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=Object(o.a)(a.a.mark((function t(e){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.get("/movie/".concat(e));case 3:return n=t.sent,r=n.data,t.abrupt("return",r);case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),f=function(){var t=Object(o.a)(a.a.mark((function t(e){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.get("/movie/".concat(e,"/credits"));case 3:return n=t.sent,r=n.data,t.abrupt("return",r);case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),d=function(){var t=Object(o.a)(a.a.mark((function t(e){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.get("/movie/".concat(e,"/reviews"));case 3:return n=t.sent,r=n.data,t.abrupt("return",r);case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}();l.propTypes={query:u.a.string.isRequired,page:u.a.number.isRequired},h.propTypes={movieId:u.a.number.isRequired},f.propTypes={movieId:u.a.number.isRequired},d.propTypes={movieId:u.a.number.isRequired},e.a={fetchMoviesDay:p,fetchMoviesSearch:l,fetchMoviesDetail:h,fetchCast:f,fetchReviews:d}},43:function(t,e,n){"use strict";e.a=n.p+"static/media/defaultImage.a234994d.jpeg"},46:function(t,e,n){t.exports={Loader:"Loader_Loader__BIuQd"}},47:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n(38),a=n(39),o=n(41),c=n(40),i=n(0),s=n(48),u=n.n(s),p=(n(49),n(46)),l=n.n(p),h=n(2),f=function(t){Object(o.a)(n,t);var e=Object(c.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){return Object(h.jsx)(u.a,{className:l.a.Loader,type:"Puff",color:"#3f51b5",height:100,width:100})}}]),n}(i.Component)},51:function(t,e,n){},52:function(t,e,n){"use strict";n(0);var r,a=n(13),o=n(1),c=n(43),i=n(11),s=n(12).a.ul(r||(r=Object(i.a)(["\n  display: flex;\n  justify-content: space-between;\n  width: 81%;\n  list-style: none;\n  flex-wrap: wrap;\n  margin:-10px auto;\n  >li {\n    max-width:200px;\n    padding: 10px;\n  }\n  >li>a{\n    color:white;\n \n  }\n"]))),u=n(2);e.a=Object(o.g)((function(t){var e=t.films,n=t.location;return Object(u.jsx)(s,{children:e.map((function(t){return Object(u.jsx)("li",{children:Object(u.jsxs)(a.b,{to:{pathname:"/movies/".concat(t.id),state:{from:n.pathname,query:n.query}},children:[Object(u.jsx)("img",{src:t.poster_path?"".concat("https://www.themoviedb.org/t/p/w600_and_h900_bestv2").concat(t.poster_path):c.a,alt:"movie",width:"200",height:"300"}),Object(u.jsx)("p",{children:t.original_title}),Object(u.jsxs)("p",{children:["Vote average: ",t.vote_average]})]})},t.id)}))})}))},53:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n(0);var r=n(8),a=n.n(r),o=(n(51),n(2)),c=function(t){var e=t.handleGoBack,n=t.text;return Object(o.jsx)("button",{className:"Button",type:"button",onClick:e,children:n})};c.prototype={handleGoBack:a.a.func.isRequired,text:a.a.string.isRequired};var i=c}}]);
//# sourceMappingURL=MoviesPage.fe8bf9a0.chunk.js.map